<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Multis.JS</title>
        <!-- External Dependencies -->
        <script src="js/p5.js/p5.min.js" charset="utf-8"></script>
        <script src="js/jquery/jquery-3.4.1.min.js" charset="utf-8"></script>
        <!-- Custom JS -->
        <script src="js/multis/interpreter.js" charset="utf-8"></script>
        <script src="js/multis/universe.js" charset="utf-8"></script>
        <script src="js/multis/functions.js" charset="utf-8"></script>
        <script src="js/multis/functions.layers.js" charset="utf-8"></script>
        <script src="js/multis/functions.modifiers.js" charset="utf-8"></script>
        <script src="js/multis/ops/start.js" charset="utf-8"></script>
        <script src="js/editor/canvas.js" charset="utf-8"></script>
        <script src="js/editor/selector.js" charset="utf-8"></script>
        <script src="js/editor/debugger.js" charset="utf-8"></script>
        <script src="js/editor/logger.js" charset="utf-8"></script>
        <script src="js/sketch.js" charset="utf-8"></script>

        <!-- External-Font -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <link href="css/open-iconic/font/css/open-iconic.min.css" rel="stylesheet">
        <!-- Custom Style -->
        <link rel="stylesheet" href="css/p5.canvas.css">
        <link rel="stylesheet" href="css/multis.editor.css">
        <link rel="stylesheet" href="css/multis.style.css">
    </head>

    <body>
        <div id="multis-head">
            <h1>Multis</h1>
        </div>
        <div id="multis-editor">
            <div class="multis-split left">
                <div id="editor"></div>
            </div>
            
            <div class="multis-split right">
                <div class="multis-toolbar">
                    <a id="btn-launch" class="multis-btn" href="#">
                        <span class="oi" data-glyph="media-play"></span>
                    </a>
                    <a id="btn-pause" class="multis-btn" href="#">
                        <span class="oi" data-glyph="media-pause"></span>
                    </a>
                    <a id="btn-step" class="multis-btn" href="#">
                        <span class="oi" data-glyph="media-step-forward"></span>
                    </a>
                </div>

                <h3>Output</h3>
                <textarea id="editor-output"></textarea>
            </div> 
        </div>

        <script>
            // disables the context menu. Why? because of the delete mode
            // document.addEventListener('contextmenu', event => event.preventDefault());
            $("body").on("contextmenu", 'canvas', (e) => e.preventDefault());

            let interv = null;
            $('#btn-launch').click((e) => {
                e.preventDefault();

                if (interv === null) {
                    interp.init();
                    interv = setInterval(() => interp.step(), 500);
                }
                else {
                    interp.reset();
                    clearInterval(interv);
                    interv = null;
                }
            })
        </script>
    </body>
</html>